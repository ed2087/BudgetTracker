<!DOCTYPE html>
<html lang="en">
<head>
    <%- include('partials/head') %>
    <link rel="stylesheet" href="/css/register.css">
</head>
<body>
    <div class="register-container">
        <div class="register-card">
            <h1>Create Account</h1>
            <p class="register-subtitle">Budget Tracker - Household Registration</p>

            <!-- Progress Steps -->
            <div class="progress-steps">
                <div class="step active" data-step="1">
                    <div class="step-number">1</div>
                    <div class="step-label">Account</div>
                </div>
                <div class="step" data-step="2">
                    <div class="step-number">2</div>
                    <div class="step-label">Security</div>
                </div>
                <div class="step" data-step="3">
                    <div class="step-number">3</div>
                    <div class="step-label">Complete</div>
                </div>
            </div>

            <div id="errorMessage" class="form-error hidden"></div>

            <form id="registerForm">
                <!-- STEP 1: Account Info -->
                <div class="form-step active" data-step="1">
                    <div class="form-group">
                        <label for="householdName">Household Name</label>
                        <input type="text" id="householdName" name="householdName" placeholder="The Smith Family" required>
                    </div>

                    <div class="form-group">
                        <label for="username">Username</label>
                        <input type="text" id="username" name="username" placeholder="smiths" required minlength="3" autocomplete="username">
                    </div>

                    <div class="form-group">
                        <label for="password">Password</label>
                        <input type="password" id="password" name="password" required minlength="6" autocomplete="new-password">
                    </div>

                    <div class="form-group">
                        <label for="confirmPassword">Confirm Password</label>
                        <input type="password" id="confirmPassword" name="confirmPassword" required minlength="6" autocomplete="new-password">
                    </div>

                    <button type="button" class="btn btn-primary btn-block" id="nextStep1">Next - Security Questions</button>
                </div>

                <!-- STEP 2: Security Questions -->
                <div class="form-step" data-step="2">
                    <p class="step-info">Choose 2 different security questions. You'll need these to reset your password if you forget it.</p>

                    <div class="form-group">
                        <label for="question1">Security Question 1</label>
                        <select id="question1" required>
                            <option value="">Select a question</option>
                            <option value="What was your first pet's name?">What was your first pet's name?</option>
                            <option value="What city were you born in?">What city were you born in?</option>
                            <option value="What is your mother's maiden name?">What is your mother's maiden name?</option>
                            <option value="What was the name of your first school?">What was the name of your first school?</option>
                            <option value="What is your favorite movie?">What is your favorite movie?</option>
                            <option value="What was your childhood nickname?">What was your childhood nickname?</option>
                            <option value="What street did you grow up on?">What street did you grow up on?</option>
                            <option value="What is your father's middle name?">What is your father's middle name?</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="answer1">Answer 1</label>
                        <input type="text" id="answer1" required minlength="2" placeholder="Your answer">
                    </div>

                    <div class="form-group">
                        <label for="question2">Security Question 2</label>
                        <select id="question2" required>
                            <option value="">Select a question</option>
                            <option value="What was your first pet's name?">What was your first pet's name?</option>
                            <option value="What city were you born in?">What city were you born in?</option>
                            <option value="What is your mother's maiden name?">What is your mother's maiden name?</option>
                            <option value="What was the name of your first school?">What was the name of your first school?</option>
                            <option value="What is your favorite movie?">What is your favorite movie?</option>
                            <option value="What was your childhood nickname?">What was your childhood nickname?</option>
                            <option value="What street did you grow up on?">What street did you grow up on?</option>
                            <option value="What is your father's middle name?">What is your father's middle name?</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="answer2">Answer 2</label>
                        <input type="text" id="answer2" required minlength="2" placeholder="Your answer">
                    </div>

                    <div class="button-group">
                        <button type="button" class="btn btn-secondary" id="backStep2">Back</button>
                        <button type="submit" class="btn btn-primary" id="submitBtn">Create Account</button>
                    </div>
                </div>

                <!-- STEP 3: Recovery Code -->
                <div class="form-step" data-step="3">
                    <div class="success-icon">‚úì</div>
                    <h2 class="success-title">Account Created!</h2>
                    
                    <div class="recovery-section">
                        <p class="recovery-warning"><strong>‚ö†Ô∏è SAVE YOUR RECOVERY CODE</strong></p>
                        <p class="recovery-note">This is the ONLY way to reset your password if you forget your security questions. Write it down or screenshot it now.</p>
                        
                        <div class="recovery-code-box">
                            <div class="recovery-code" id="recoveryCodeText"></div>
                            <button type="button" class="btn btn-primary btn-sm" id="copyCodeBtn">üìã Copy Code</button>
                        </div>

                        <div class="recovery-checklist">
                            <label class="checkbox-label">
                                <input type="checkbox" id="confirmSaved">
                                <span>I have saved my recovery code in a safe place</span>
                            </label>
                        </div>

                        <button type="button" class="btn btn-success btn-block" id="continueBtn" disabled>Continue to Login</button>
                    </div>
                </div>
            </form>

            <div class="register-footer">
                <p>Already have an account? <a href="/login">Login here</a></p>
            </div>
        </div>
    </div>

    <script src="/js/global.js"></script>
    <script src="/js/register.js"></script>
</body>
</html>